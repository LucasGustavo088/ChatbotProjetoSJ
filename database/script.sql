-- MySQL Script generated by MySQL Workbench
-- Sun Mar 25 00:39:25 2018
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Table `ATENDENTE`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ATENDENTE` ;

CREATE TABLE IF NOT EXISTS `ATENDENTE` (
  `ID_ATENDENTE` INT NOT NULL AUTO_INCREMENT,
  `NM_ATENDENTE` VARCHAR(45) NOT NULL,
  `ATIVO` TINYINT NULL,
  `CRIADO` DATETIME NULL,
  `ATUALIZADO` DATETIME NULL,
  PRIMARY KEY (`ID_ATENDENTE`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `CLIENTE`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `CLIENTE` ;

CREATE TABLE IF NOT EXISTS `CLIENTE` (
  `ID_CLIENTE` INT NOT NULL AUTO_INCREMENT,
  `NOME_CLIENTE` VARCHAR(45) NOT NULL,
  `EMAIL_CLIENTE` VARCHAR(45) NOT NULL,
  `ATIVO` TINYINT NULL,
  `ATUALIZADO` DATETIME NULL,
  `CRIADO` DATETIME NULL,
  PRIMARY KEY (`ID_CLIENTE`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `PERGUNTA`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `PERGUNTA` ;

CREATE TABLE IF NOT EXISTS `PERGUNTA` (
  `ID_PERGUNTA` INT NOT NULL AUTO_INCREMENT,
  `DESCR_PERGUNTA` VARCHAR(45) NOT NULL,
  `ATIVO` TINYINT NULL,
  `ATUALIZADO` DATETIME NULL,
  `CRIADO` DATETIME NULL,
  PRIMARY KEY (`ID_PERGUNTA`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ATENDIMENTO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ATENDIMENTO` ;

CREATE TABLE IF NOT EXISTS `ATENDIMENTO` (
  `ID_ATENDIMENTO` INT NOT NULL AUTO_INCREMENT,
  `DESCR_ATENDIMENTO` VARCHAR(45) NOT NULL,
  `ATIVO` TINYINT NULL,
  `ATUALIZADO` DATETIME NULL,
  `CRIADO` DATETIME NULL,
  `ATENDENTE_ID_ATENDENTE` INT NOT NULL,
  `CLIENTE_ID_CLIENTE` INT NOT NULL,
  `PERGUNTA_ID_PERGUNTA` INT NOT NULL,
  `DURACAO_ATENDIMENTO` INT NULL,
  `QTD_TENTATIVA` INT NULL,
  PRIMARY KEY (`ID_ATENDIMENTO`),
  INDEX `fk_ATENDIMENTO_ATENDENTE_idx` (`ATENDENTE_ID_ATENDENTE` ASC),
  INDEX `fk_ATENDIMENTO_CLIENTE1_idx` (`CLIENTE_ID_CLIENTE` ASC),
  INDEX `fk_ATENDIMENTO_PERGUNTA1_idx` (`PERGUNTA_ID_PERGUNTA` ASC),
  CONSTRAINT `fk_ATENDIMENTO_ATENDENTE`
    FOREIGN KEY (`ATENDENTE_ID_ATENDENTE`)
    REFERENCES `ATENDENTE` (`ID_ATENDENTE`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_ATENDIMENTO_CLIENTE1`
    FOREIGN KEY (`CLIENTE_ID_CLIENTE`)
    REFERENCES `CLIENTE` (`ID_CLIENTE`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_ATENDIMENTO_PERGUNTA1`
    FOREIGN KEY (`PERGUNTA_ID_PERGUNTA`)
    REFERENCES `PERGUNTA` (`ID_PERGUNTA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `RESPOSTA`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `RESPOSTA` ;

CREATE TABLE IF NOT EXISTS `RESPOSTA` (
  `ID_RESPOSTA` INT NOT NULL AUTO_INCREMENT,
  `DESCR_RESPOSTA` VARCHAR(45) NOT NULL,
  `ATIVO` TINYINT NULL,
  `ATUALIZADO` DATETIME NULL,
  `CRIADO` DATETIME NULL,
  PRIMARY KEY (`ID_RESPOSTA`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `PALAVRA-CHAVE`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `PALAVRA-CHAVE` ;

CREATE TABLE IF NOT EXISTS `PALAVRA-CHAVE` (
  `ID_PALAVRA-CHAVE` INT NOT NULL AUTO_INCREMENT,
  `NM_PALAVRA-CHAVE` VARCHAR(45) NOT NULL,
  `ATIVO` TINYINT NULL,
  `ATUALIZADO` DATETIME NULL,
  `CRIADO` DATETIME NULL,
  PRIMARY KEY (`ID_PALAVRA-CHAVE`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `PERGUNTA_has_PALAVRA-CHAVE`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `PERGUNTA_has_PALAVRA-CHAVE` ;

CREATE TABLE IF NOT EXISTS `PERGUNTA_has_PALAVRA-CHAVE` (
  `PERGUNTA_ID_PERGUNTA` INT NOT NULL,
  `PALAVRA-CHAVE_ID_PALAVRA-CHAVE` INT NOT NULL,
  `PONT_PERGUNTA` VARCHAR(45) NULL,
  PRIMARY KEY (`PERGUNTA_ID_PERGUNTA`, `PALAVRA-CHAVE_ID_PALAVRA-CHAVE`),
  INDEX `fk_PERGUNTA_has_PALAVRA-CHAVE_PALAVRA-CHAVE1_idx` (`PALAVRA-CHAVE_ID_PALAVRA-CHAVE` ASC),
  INDEX `fk_PERGUNTA_has_PALAVRA-CHAVE_PERGUNTA1_idx` (`PERGUNTA_ID_PERGUNTA` ASC),
  CONSTRAINT `fk_PERGUNTA_has_PALAVRA-CHAVE_PERGUNTA1`
    FOREIGN KEY (`PERGUNTA_ID_PERGUNTA`)
    REFERENCES `PERGUNTA` (`ID_PERGUNTA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_PERGUNTA_has_PALAVRA-CHAVE_PALAVRA-CHAVE1`
    FOREIGN KEY (`PALAVRA-CHAVE_ID_PALAVRA-CHAVE`)
    REFERENCES `PALAVRA-CHAVE` (`ID_PALAVRA-CHAVE`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `PALAVRA-CHAVE_has_RESPOSTA`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `PALAVRA-CHAVE_has_RESPOSTA` ;

CREATE TABLE IF NOT EXISTS `PALAVRA-CHAVE_has_RESPOSTA` (
  `PALAVRA-CHAVE_ID_PALAVRA-CHAVE` INT NOT NULL,
  `RESPOSTA_ID_RESPOSTA` INT NOT NULL,
  `PONT_RESPOSTA` INT NULL,
  PRIMARY KEY (`PALAVRA-CHAVE_ID_PALAVRA-CHAVE`, `RESPOSTA_ID_RESPOSTA`),
  INDEX `fk_PALAVRA-CHAVE_has_RESPOSTA_RESPOSTA1_idx` (`RESPOSTA_ID_RESPOSTA` ASC),
  INDEX `fk_PALAVRA-CHAVE_has_RESPOSTA_PALAVRA-CHAVE1_idx` (`PALAVRA-CHAVE_ID_PALAVRA-CHAVE` ASC),
  CONSTRAINT `fk_PALAVRA-CHAVE_has_RESPOSTA_PALAVRA-CHAVE1`
    FOREIGN KEY (`PALAVRA-CHAVE_ID_PALAVRA-CHAVE`)
    REFERENCES `PALAVRA-CHAVE` (`ID_PALAVRA-CHAVE`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_PALAVRA-CHAVE_has_RESPOSTA_RESPOSTA1`
    FOREIGN KEY (`RESPOSTA_ID_RESPOSTA`)
    REFERENCES `RESPOSTA` (`ID_RESPOSTA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ATENDIMENTO_has_RESPOSTA`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ATENDIMENTO_has_RESPOSTA` ;

CREATE TABLE IF NOT EXISTS `ATENDIMENTO_has_RESPOSTA` (
  `ATENDIMENTO_ID_ATENDIMENTO` INT NOT NULL,
  `RESPOSTA_ID_RESPOSTA` INT NOT NULL,
  PRIMARY KEY (`ATENDIMENTO_ID_ATENDIMENTO`, `RESPOSTA_ID_RESPOSTA`),
  INDEX `fk_ATENDIMENTO_has_RESPOSTA_RESPOSTA1_idx` (`RESPOSTA_ID_RESPOSTA` ASC),
  INDEX `fk_ATENDIMENTO_has_RESPOSTA_ATENDIMENTO1_idx` (`ATENDIMENTO_ID_ATENDIMENTO` ASC),
  CONSTRAINT `fk_ATENDIMENTO_has_RESPOSTA_ATENDIMENTO1`
    FOREIGN KEY (`ATENDIMENTO_ID_ATENDIMENTO`)
    REFERENCES `ATENDIMENTO` (`ID_ATENDIMENTO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_ATENDIMENTO_has_RESPOSTA_RESPOSTA1`
    FOREIGN KEY (`RESPOSTA_ID_RESPOSTA`)
    REFERENCES `RESPOSTA` (`ID_RESPOSTA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `PONTUACAO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `PONTUACAO` ;

CREATE TABLE IF NOT EXISTS `PONTUACAO` (
  `ID_PONTUACAO` INT NOT NULL,
  `QTD_PONTOS` INT NULL,
  `RESPOSTA_ID_RESPOSTA` INT NOT NULL,
  `PERGUNTA_ID_PERGUNTA` INT NOT NULL,
  PRIMARY KEY (`ID_PONTUACAO`),
  INDEX `fk_PONTUACAO_RESPOSTA1_idx` (`RESPOSTA_ID_RESPOSTA` ASC),
  INDEX `fk_PONTUACAO_PERGUNTA1_idx` (`PERGUNTA_ID_PERGUNTA` ASC),
  CONSTRAINT `fk_PONTUACAO_RESPOSTA1`
    FOREIGN KEY (`RESPOSTA_ID_RESPOSTA`)
    REFERENCES `RESPOSTA` (`ID_RESPOSTA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_PONTUACAO_PERGUNTA1`
    FOREIGN KEY (`PERGUNTA_ID_PERGUNTA`)
    REFERENCES `PERGUNTA` (`ID_PERGUNTA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;


CREATE TABLE `users` (
   `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
   `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
   `email` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
   `password` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
   `remember_token` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
   `created_at` timestamp NULL DEFAULT NULL,
   `updated_at` timestamp NULL DEFAULT NULL,
   PRIMARY KEY (`id`)
 ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
 
-- POPULANDO USUARIOusers
insert into `users` (`email`, `name`, `password`, `updated_at`, `created_at`) values ('funcionario@email.com', 'Funcionario', '$2y$10$cf22WIcjgw99j1E1DS16wOgma1ofXdAqPc/XjN/7uyKl8zZx0E84.', '2018-03-24 16:04:24', '2018-03-24 16:04:24');
